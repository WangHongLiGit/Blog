# react笔记分享（二）：react生命周期
`我们在学习react经常用到ES6的语法   ES6同时也是前端内容中很重要的一项，`

## 1.组件中间的参数传递：props

```java
 
 /**  4.props属性的用法：类组件中的constructor继承props 但是规范规在写     		construcor函数的时候 我们都要继承props属性
 * 
 * 
 *             常用：——————>父组件向子组件传递参数用的
 * 
 *             自定义属性————————————>类组件：      this.props.title    (继承过来的 )
 *                                   无状态组件：        props.title   (以函数参数形式传递过来的)
 * 
 *             子标签属性————————————>类组件：this.props.children
 *                                   无状态组件：        props.children
  * 
 */
```

## 2.react的生命周期

react的生命周期中分为两个分支。。。。。。。。。。。。

```javascript
class App extends Component {
  constructor(){
      super();
      console.log("APP的constructor被调用")
      this.state={
        isRemoveButton:false,           
        color:""                  
      }
  }
  componentWillMount(){
    console.log("App组件将要被装载componentWillMount")
  }
  componentDidMount(){
    console.log("App组件被装载完成componentDidMount")
  }
  
  shouldComponentUpdate(){
    console.log("App判断组件是否可被更新shouldComponentUpdate")
    return true;
  }
  componentWillUpdate(){
    console.log("App组件将要被更新componentWillUpdate")
  }
  componentDidUpdate(){
    console.log("App组件被更新完成componentDidUpdate")
  }
  changeColor(newColor){       
    this.setState({color:newColor})
  }
  changeRemoveButton(){       
    this.setState({isRemoveButton:!this.state.isRemoveButton})
  }  
  render() {
    console.log("APP的render被调用")
    return (
      <div className="App" style={{height:"100px",border:"solid black 1px"}}>
      <button style={{color:this.state.color}} onClick={()=>{this.changeColor("blue")}}>APP按钮点击变蓝</button>
          {this.state.isRemoveButton?"不展示Button组件":<Button></Button>}
          <button onClick={()=>{this.changeRemoveButton()}}>APP按钮点击卸载Button</button>  
      </div>
    );
  }
}
export default App;
```

## react中的属性检查propTypes

- 擦拭擦

  ```javascript
  import React, { Component } from 'react';
  import './App.css';
  import propTypes from "prop-types";   //引入
  
  /**
   *        类型检查：propTypes————————————>js中没有类型检查
   *       
   *         需要安装propTypes并且引入使用： 在my-app中安装  cnpm install prop-types --save
   *                                   :import PropTypes from "prop-types"引入使用
   */
  
  class Button extends Component{
  
      static propTypes={                      //重写propTypes对象
        text:propTypes.string                 //根据propTypes的里面的数据类型定义propTypes对象
     }                                        //如果不符合————————>会报一个警告
  
      static defaultProps={                   //ES7的静态属性： defaultProps静态对象里面设置静态属性
        text:"默认传递参数"                    // 如果传递参数了  那就有限按照传过来的props来展示
          								   // 如果没传递  那就用默认的值
      }
      constructor(props){
          super(props)
          this.state={           
            color:""                  
          }
      }
      changeColor(newColor){       
        this.setState({color:newColor})
      }
      render(){
          return(
            <div>
              <button style={{color: this.state.color}} onClick={()=>								{this.changeColor("red")}}>{this.props.text}</button>        
            </div>
          )
      }    
  }
  
  class App extends Component {
    constructor(){
        super();
   }
    render() {
      return (
        <div className="App" style={{height:"100px",border:"solid black 1px"}}>
            <Button text={12}></Button>
        </div>
      );
    }
  }
  export default App;
  
  ```

  





## react中的context作用域

- 通过context可以传递参数或者函数

  ```javascript
  //子组件改变父组件背景色-
  //context更改
  
  
  import React, { Component } from 'react';
  import './App.css';
  import propTypes from "prop-types";
  
  /**
   *   context上下文： context依赖propTypes类型检查（通过context也可以传递参数或者函数）
   *              在App父组件中：
   *                       1.定义static  childContextTypes对象————————————————>规定传到子组件的方法
   *                       2.定义        getChildContext()方法————————————————>return传覅地到各个子组件
   * 
   *              在Button子组件中：
   *                       1.定义 static contextTypes———————————————>在子组件中也要检查进行类型检查
   *                       2，提取出context对象中的变量——————————————>let {themeColor} = this.context
   * 
   */
  
  //子组件改变父组件背景色-
  //context更改
  class Button extends Component{
      //定义子组件从context中获取参数的类型
      static contextTypes={
        themeColor:propTypes.string,
        changeThemeColor:propTypes.func
      }
      constructor(props){
          super(props)
      }
      render(){
          //类似于props  context直接从this下获取
          let {themeColor,changeThemeColor}=this.context;
          return(
            <div>
              <button style={{color:themeColor}} onClick={()=>{changeThemeColor("red")}}>点击主题变红</button>        
            </div>
          )
      }    
  }
  
  class App extends Component {
    //父类传递子组件之前要定义传输参数类型
    static childContextTypes={        
        themeColor:propTypes.string,
        changeThemeColor:propTypes.func
    }
    constructor(){
        super();
        this.state={
          themeColor:""
        }
    }
    changeThemeColor(newColor){
      this.setState({themeColor:newColor})
    }
  //将父组件的state和更改函数	都通过Context传递过去
    getChildContext(){                
        return{
          themeColor:this.state.themeColor,
          changeThemeColor:(newColor)=>{this.changeThemeColor(newColor)}
        }
    }
    render() {
      return (
        <div className="App" style={{height:"100px",border:"solid black 1px"}}>
            <Button></Button>
        </div>
      );
    }
  }
  export default App;
  
  ```

  